// Generated by CoffeeScript 2.7.0
var data, datum, xdraw;

import {
  parseExpr
} from './parser.js';

import {
  g,
  print,
  range
} from './globals.js';

import {
  Button,
  spread
} from './button.js';

import {
  Lista
} from './lista.js';

import {
  Tournament
} from './tournament.js';

import {
  Tables
} from './page_tables.js';

import {
  Names
} from './page_names.js';

import {
  Standings
} from './page_standings.js';

import {
  Active
} from './page_active.js';

export var handleFile = function(filename, data) {
  return g.tournament.fetchData(filename, data);
};

g.RINGS = {
  'b': 'b',
  ' ': ' ',
  'w': 'w'
};

g.ASCII = '0123456789abcdefg';

g.ALFABET = '123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'; // 62 ronder maximalt

datum = '';

g.tournament = null;

g.errors = []; // id för motsägelsefulla resultat. Tas bort med Delete

g.pages = [];

data = `TITLE=Senior Stockholm
DATE=2024-05-28

1598!AIKIO Onni
1539!ANDERSSON Lars Owe
1532!ANTONSSON Görgen
1697!BJÖRKDAHL Göran
1598!ISRAEL Dan
1825!JOHANSSON Lennart
1559!LEHVONEN Jouko
1561!LILJESTRÖM Tor
1583!PERSSON Kjell
1644!PETTERSSON Lars-Åke
1684!SILINS Peteris
1681!STOLOV Leonid
1400!STRÖMBÄCK Henrik
1535!ÅBERG Lars-Erik`;

window.windowResized = function() {
  resizeCanvas(windowWidth, windowHeight - 4);
  g.LPP = Math.trunc(height / g.ZOOM[g.state] - 4.5);
  return xdraw();
};

window.setup = function() {
  createCanvas(windowWidth - 4, windowHeight - 4);
  textFont('Courier New');
  // textAlign window.LEFT,window.TOP
  textAlign(CENTER, CENTER);
  rectMode(window.CORNER);
  noStroke();
  g.ZOOM = [
    20,
    20,
    20,
    20 // vertical line distance for four states
  ];
  g.LPP = Math.trunc(height / g.ZOOM[g.state] - 4.5);
  g.N = 0; // number of players
  g.tournament = new Tournament();
  g.state = g.STANDINGS;
  // g.state = g.ACTIVE
  g.pages = [new Tables(), new Names(), new Standings(), new Active()];
  print(g.pages);
  // print data
  g.tournament.fetchData("DEMO", data);
  return window.windowResized();
};

xdraw = function() {
  background('gray');
  textSize(g.ZOOM[g.state]);
  return g.pages[g.state].draw();
};

// window.mouseMoved = (event) -> 
// 	g.pages[g.state].mouseMoved event
// 	xdraw()
window.mousePressed = function(event) {
  g.pages[g.state].mousePressed(event);
  return xdraw();
};

window.mouseWheel = function(event) {
  g.pages[g.state].mouseWheel(event);
  return xdraw();
};

window.keyPressed = function(event) {
  var key2;
  key2 = key;
  if (key2 === 'Control' || key2 === 'Shift' || key2 === 'I') {
    return;
  }
  if (key2 === '1') {
    key2 = 'K1';
  }
  if (key2 === '0') {
    key2 = 'K0';
  }
  g.pages[g.state].keyPressed(event, key2);
  return xdraw();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFpcnBhaXIuanMiLCJzb3VyY2VSb290IjoiLi5cXCIsInNvdXJjZXMiOlsiY29mZmVlXFxmYWlycGFpci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQTs7QUFBQSxPQUFBO0VBQVMsU0FBVDtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLENBQVQ7RUFBVyxLQUFYO0VBQWlCLEtBQWpCO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVMsTUFBVDtFQUFnQixNQUFoQjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLEtBQVQ7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUyxVQUFUO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVMsTUFBVDtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLEtBQVQ7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUyxTQUFUO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVMsTUFBVDtDQUFBLE1BQUE7O0FBRUEsT0FBQSxJQUFPLFVBQUEsR0FBYSxRQUFBLENBQUMsUUFBRCxFQUFVLElBQVYsQ0FBQTtTQUFtQixDQUFDLENBQUMsVUFBVSxDQUFDLFNBQWIsQ0FBdUIsUUFBdkIsRUFBZ0MsSUFBaEM7QUFBbkI7O0FBRXBCLENBQUMsQ0FBQyxLQUFGLEdBQVU7RUFBQyxHQUFBLEVBQUksR0FBTDtFQUFVLEdBQUEsRUFBSSxHQUFkO0VBQW1CLEdBQUEsRUFBSTtBQUF2Qjs7QUFDVixDQUFDLENBQUMsS0FBRixHQUFVOztBQUNWLENBQUMsQ0FBQyxPQUFGLEdBQVksZ0VBZFo7O0FBZ0JBLEtBQUEsR0FBUTs7QUFFUixDQUFDLENBQUMsVUFBRixHQUFlOztBQUNmLENBQUMsQ0FBQyxNQUFGLEdBQVcsR0FuQlg7O0FBb0JBLENBQUMsQ0FBQyxLQUFGLEdBQVU7O0FBRVYsSUFBQSxHQUFPLENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUE7O0FBb0JQLE1BQU0sQ0FBQyxhQUFQLEdBQXVCLFFBQUEsQ0FBQSxDQUFBO0VBQ3RCLFlBQUEsQ0FBYSxXQUFiLEVBQTBCLFlBQUEsR0FBZSxDQUF6QztFQUNBLENBQUMsQ0FBQyxHQUFGLEdBQVEsSUFBSSxDQUFDLEtBQUwsQ0FBVyxNQUFBLEdBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSCxDQUFmLEdBQTJCLEdBQXRDO1NBQ1IsS0FBQSxDQUFBO0FBSHNCOztBQUt2QixNQUFNLENBQUMsS0FBUCxHQUFlLFFBQUEsQ0FBQSxDQUFBO0VBQ2QsWUFBQSxDQUFhLFdBQUEsR0FBWSxDQUF6QixFQUEyQixZQUFBLEdBQWEsQ0FBeEM7RUFDQSxRQUFBLENBQVMsYUFBVCxFQUREOztFQUdDLFNBQUEsQ0FBVSxNQUFWLEVBQWlCLE1BQWpCO0VBQ0EsUUFBQSxDQUFTLE1BQU0sQ0FBQyxNQUFoQjtFQUNBLFFBQUEsQ0FBQTtFQUVBLENBQUMsQ0FBQyxJQUFGLEdBQVM7SUFBQyxFQUFEO0lBQUksRUFBSjtJQUFPLEVBQVA7SUFBVSxFQUFWOztFQUNULENBQUMsQ0FBQyxHQUFGLEdBQVEsSUFBSSxDQUFDLEtBQUwsQ0FBVyxNQUFBLEdBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsS0FBSCxDQUFmLEdBQTJCLEdBQXRDO0VBRVIsQ0FBQyxDQUFDLENBQUYsR0FBTSxFQVZQO0VBV0MsQ0FBQyxDQUFDLFVBQUYsR0FBZSxJQUFJLFVBQUosQ0FBQTtFQUNmLENBQUMsQ0FBQyxLQUFGLEdBQVUsQ0FBQyxDQUFDLFVBWmI7O0VBZUMsQ0FBQyxDQUFDLEtBQUYsR0FBVSxDQUFDLElBQUksTUFBSixDQUFBLENBQUQsRUFBYSxJQUFJLEtBQUosQ0FBQSxDQUFiLEVBQXdCLElBQUksU0FBSixDQUFBLENBQXhCLEVBQXVDLElBQUksTUFBSixDQUFBLENBQXZDO0VBQ1YsS0FBQSxDQUFNLENBQUMsQ0FBQyxLQUFSLEVBaEJEOztFQW1CQyxDQUFDLENBQUMsVUFBVSxDQUFDLFNBQWIsQ0FBdUIsTUFBdkIsRUFBOEIsSUFBOUI7U0FFQSxNQUFNLENBQUMsYUFBUCxDQUFBO0FBdEJjOztBQXdCZixLQUFBLEdBQVEsUUFBQSxDQUFBLENBQUE7RUFDUCxVQUFBLENBQVcsTUFBWDtFQUNBLFFBQUEsQ0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxLQUFILENBQWY7U0FDQSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFILENBQVMsQ0FBQyxJQUFqQixDQUFBO0FBSE8sRUF2RVI7Ozs7O0FBZ0ZBLE1BQU0sQ0FBQyxZQUFQLEdBQXNCLFFBQUEsQ0FBQyxLQUFELENBQUE7RUFDckIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSCxDQUFTLENBQUMsWUFBakIsQ0FBOEIsS0FBOUI7U0FDQSxLQUFBLENBQUE7QUFGcUI7O0FBSXRCLE1BQU0sQ0FBQyxVQUFQLEdBQW9CLFFBQUEsQ0FBQyxLQUFELENBQUE7RUFDbkIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSCxDQUFTLENBQUMsVUFBakIsQ0FBNEIsS0FBNUI7U0FDQSxLQUFBLENBQUE7QUFGbUI7O0FBSXBCLE1BQU0sQ0FBQyxVQUFQLEdBQXNCLFFBQUEsQ0FBQyxLQUFELENBQUE7QUFDdEIsTUFBQTtFQUFDLElBQUEsR0FBTztFQUNQLElBQUcsU0FBUyxhQUFULFNBQW1CLFdBQW5CLFNBQTJCLEdBQTlCO0FBQXdDLFdBQXhDOztFQUNBLElBQUcsSUFBQSxLQUFRLEdBQVg7SUFBb0IsSUFBQSxHQUFPLEtBQTNCOztFQUNBLElBQUcsSUFBQSxLQUFRLEdBQVg7SUFBb0IsSUFBQSxHQUFPLEtBQTNCOztFQUNBLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUgsQ0FBUyxDQUFDLFVBQWpCLENBQTRCLEtBQTVCLEVBQWtDLElBQWxDO1NBQ0EsS0FBQSxDQUFBO0FBTnFCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGFyc2VFeHByIH0gZnJvbSAnLi9wYXJzZXIuanMnXHJcbmltcG9ydCB7IGcscHJpbnQscmFuZ2UgfSBmcm9tICcuL2dsb2JhbHMuanMnIFxyXG5pbXBvcnQgeyBCdXR0b24sc3ByZWFkIH0gZnJvbSAnLi9idXR0b24uanMnIFxyXG5pbXBvcnQgeyBMaXN0YSB9IGZyb20gJy4vbGlzdGEuanMnIFxyXG5pbXBvcnQgeyBUb3VybmFtZW50IH0gZnJvbSAnLi90b3VybmFtZW50LmpzJyBcclxuaW1wb3J0IHsgVGFibGVzIH0gZnJvbSAnLi9wYWdlX3RhYmxlcy5qcycgXHJcbmltcG9ydCB7IE5hbWVzIH0gZnJvbSAnLi9wYWdlX25hbWVzLmpzJyBcclxuaW1wb3J0IHsgU3RhbmRpbmdzIH0gZnJvbSAnLi9wYWdlX3N0YW5kaW5ncy5qcycgXHJcbmltcG9ydCB7IEFjdGl2ZSB9IGZyb20gJy4vcGFnZV9hY3RpdmUuanMnIFxyXG5cclxuZXhwb3J0IGhhbmRsZUZpbGUgPSAoZmlsZW5hbWUsZGF0YSkgLT4gZy50b3VybmFtZW50LmZldGNoRGF0YSBmaWxlbmFtZSxkYXRhXHRcclxuXHJcbmcuUklOR1MgPSB7J2InOidiJywgJyAnOicgJywgJ3cnOid3J31cclxuZy5BU0NJSSA9ICcwMTIzNDU2Nzg5YWJjZGVmZydcclxuZy5BTEZBQkVUID0gJzEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonICMgNjIgcm9uZGVyIG1heGltYWx0XHJcblxyXG5kYXR1bSA9ICcnXHJcblxyXG5nLnRvdXJuYW1lbnQgPSBudWxsXHJcbmcuZXJyb3JzID0gW10gIyBpZCBmw7ZyIG1vdHPDpGdlbHNlZnVsbGEgcmVzdWx0YXQuIFRhcyBib3J0IG1lZCBEZWxldGVcclxuZy5wYWdlcyA9IFtdXHJcbiBcclxuZGF0YSA9IFwiXCJcIlxyXG5USVRMRT1TZW5pb3IgU3RvY2tob2xtXHJcbkRBVEU9MjAyNC0wNS0yOFxyXG5cclxuMTU5OCFBSUtJTyBPbm5pXHJcbjE1MzkhQU5ERVJTU09OIExhcnMgT3dlXHJcbjE1MzIhQU5UT05TU09OIEfDtnJnZW5cclxuMTY5NyFCSsOWUktEQUhMIEfDtnJhblxyXG4xNTk4IUlTUkFFTCBEYW5cclxuMTgyNSFKT0hBTlNTT04gTGVubmFydFxyXG4xNTU5IUxFSFZPTkVOIEpvdWtvXHJcbjE1NjEhTElMSkVTVFLDlk0gVG9yXHJcbjE1ODMhUEVSU1NPTiBLamVsbFxyXG4xNjQ0IVBFVFRFUlNTT04gTGFycy3DhWtlXHJcbjE2ODQhU0lMSU5TIFBldGVyaXNcclxuMTY4MSFTVE9MT1YgTGVvbmlkXHJcbjE0MDAhU1RSw5ZNQsOEQ0sgSGVucmlrXHJcbjE1MzUhw4VCRVJHIExhcnMtRXJpa1xyXG5cIlwiXCJcclxuXHJcbndpbmRvdy53aW5kb3dSZXNpemVkID0gLT4gXHJcblx0cmVzaXplQ2FudmFzIHdpbmRvd1dpZHRoLCB3aW5kb3dIZWlnaHQgLSA0XHJcblx0Zy5MUFAgPSBNYXRoLnRydW5jIGhlaWdodCAvIGcuWk9PTVtnLnN0YXRlXSAtIDQuNVxyXG5cdHhkcmF3KClcclxuXHJcbndpbmRvdy5zZXR1cCA9IC0+XHJcblx0Y3JlYXRlQ2FudmFzIHdpbmRvd1dpZHRoLTQsd2luZG93SGVpZ2h0LTRcclxuXHR0ZXh0Rm9udCAnQ291cmllciBOZXcnXHJcblx0IyB0ZXh0QWxpZ24gd2luZG93LkxFRlQsd2luZG93LlRPUFxyXG5cdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcblx0cmVjdE1vZGUgd2luZG93LkNPUk5FUlxyXG5cdG5vU3Ryb2tlKClcclxuXHJcblx0Zy5aT09NID0gWzIwLDIwLDIwLDIwXSAjIHZlcnRpY2FsIGxpbmUgZGlzdGFuY2UgZm9yIGZvdXIgc3RhdGVzXHJcblx0Zy5MUFAgPSBNYXRoLnRydW5jIGhlaWdodCAvIGcuWk9PTVtnLnN0YXRlXSAtIDQuNVxyXG5cclxuXHRnLk4gPSAwICMgbnVtYmVyIG9mIHBsYXllcnNcclxuXHRnLnRvdXJuYW1lbnQgPSBuZXcgVG91cm5hbWVudCgpXHJcblx0Zy5zdGF0ZSA9IGcuU1RBTkRJTkdTXHJcblx0IyBnLnN0YXRlID0gZy5BQ1RJVkVcclxuXHJcblx0Zy5wYWdlcyA9IFtuZXcgVGFibGVzLCBuZXcgTmFtZXMsIG5ldyBTdGFuZGluZ3MsIG5ldyBBY3RpdmVdXHJcblx0cHJpbnQgZy5wYWdlc1xyXG5cclxuXHQjIHByaW50IGRhdGFcclxuXHRnLnRvdXJuYW1lbnQuZmV0Y2hEYXRhIFwiREVNT1wiLGRhdGFcclxuXHJcblx0d2luZG93LndpbmRvd1Jlc2l6ZWQoKVxyXG5cclxueGRyYXcgPSAtPiBcclxuXHRiYWNrZ3JvdW5kICdncmF5J1xyXG5cdHRleHRTaXplIGcuWk9PTVtnLnN0YXRlXVxyXG5cdGcucGFnZXNbZy5zdGF0ZV0uZHJhdygpXHJcblxyXG4jIHdpbmRvdy5tb3VzZU1vdmVkID0gKGV2ZW50KSAtPiBcclxuIyBcdGcucGFnZXNbZy5zdGF0ZV0ubW91c2VNb3ZlZCBldmVudFxyXG4jIFx0eGRyYXcoKVxyXG5cclxud2luZG93Lm1vdXNlUHJlc3NlZCA9IChldmVudCkgLT4gXHJcblx0Zy5wYWdlc1tnLnN0YXRlXS5tb3VzZVByZXNzZWQgZXZlbnRcclxuXHR4ZHJhdygpXHJcblxyXG53aW5kb3cubW91c2VXaGVlbCA9IChldmVudCkgLT4gXHJcblx0Zy5wYWdlc1tnLnN0YXRlXS5tb3VzZVdoZWVsIGV2ZW50XHJcblx0eGRyYXcoKVxyXG5cclxud2luZG93LmtleVByZXNzZWQgICA9IChldmVudCkgLT4gXHJcblx0a2V5MiA9IGtleVxyXG5cdGlmIGtleTIgaW4gWydDb250cm9sJywnU2hpZnQnLCdJJ10gdGhlbiByZXR1cm5cclxuXHRpZiBrZXkyID09ICcxJyB0aGVuIGtleTIgPSAnSzEnXHJcblx0aWYga2V5MiA9PSAnMCcgdGhlbiBrZXkyID0gJ0swJ1xyXG5cdGcucGFnZXNbZy5zdGF0ZV0ua2V5UHJlc3NlZCBldmVudCxrZXkyXHJcblx0eGRyYXcoKVxyXG4iXX0=
//# sourceURL=c:\github\FairPair2\coffee\fairpair.coffee