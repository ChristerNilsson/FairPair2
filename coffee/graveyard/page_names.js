// Generated by CoffeeScript 2.7.0
import {
  g,
  print,
  range,
  scalex,
  scaley
} from './globals.js';

import {
  Page
} from './page.js';

import {
  Button,
  spread
} from './button.js';

import {
  Lista
} from './lista.js';

export var Names = class Names extends Page {
  constructor() {
    super();
  }

  // @buttons.n.active = false
  // @buttons.ArrowLeft  = new Button '', '', () => g.setState g.TABLES
  // @buttons.ArrowRight = new Button '', '', () => g.setState g.ACTIVE
  setLista() {
    this.lista = new Lista(this.t.playersByName, "Table Name", this.buttons, (p) => {
      var r, s;
      r = this.t.round - 1;
      if (p.active && g.BYE !== _.last(p.opp)) {
        s = `${str(1 + Math.floor(p.chair / 2)).padStart(3)} ${g.RINGS[p.col[r][0]]} `;
      } else if (!p.active) {
        s = "   P  ";
      } else {
        s = "  BYE ";
      }
      return s + g.txtT(p.name, 25, LEFT);
    });
    return spread(this.buttons, 10, this.y, this.h);
  }

  mouseWheel(event) {
    return this.lista.mouseWheel(event);
  }

  mousePressed(event) {
    return this.lista.mousePressed(event);
  }

  keyPressed(event) {
    return this.buttons[key].click();
  }

  make(res, header, playersByName) {
    var i, j, len, player, r;
    res.push("NAMES" + header);
    res.push("");
    r = this.t.round;
    for (i = j = 0, len = playersByName.length; j < len; i = ++j) {
      player = playersByName[i];
      if (i % this.t.ppp === 0) {
        res.push("Table Name");
      }
      if (player.active && g.BYE !== player.opp[r]) {
        res.push(`${str(1 + Math.floor(player.chair / 2)).padStart(3)} ${g.RINGS[player.col[r][0]]} ${player.name}`);
      } else if (!player.active) {
        res.push(`   P  ${player.name}`);
      } else {
        res.push(`  BYE ${player.name}`);
      }
      if (i % this.t.ppp === this.t.ppp - 1) {
        res.push("\f");
      }
    }
    return res.push("\f");
  }

  draw() {
    var button, key, ref, results;
    fill('white');
    this.showHeader(this.t.round);
    this.lista.draw();
    ref = this.buttons;
    results = [];
    for (key in ref) {
      button = ref[key];
      results.push(button.draw());
    }
    return results;
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZV9uYW1lcy5qcyIsInNvdXJjZVJvb3QiOiIuLlxcIiwic291cmNlcyI6WyJjb2ZmZWVcXHBhZ2VfbmFtZXMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFBO0VBQVMsQ0FBVDtFQUFXLEtBQVg7RUFBaUIsS0FBakI7RUFBdUIsTUFBdkI7RUFBOEIsTUFBOUI7Q0FBQSxNQUFBOztBQUNBLE9BQUE7RUFBUyxJQUFUO0NBQUEsTUFBQTs7QUFDQSxPQUFBO0VBQVMsTUFBVDtFQUFnQixNQUFoQjtDQUFBLE1BQUE7O0FBQ0EsT0FBQTtFQUFTLEtBQVQ7Q0FBQSxNQUFBOztBQUVBLE9BQUEsSUFBYSxRQUFOLE1BQUEsTUFBQSxRQUFvQixLQUFwQjtFQUVOLFdBQWMsQ0FBQSxDQUFBO1NBQ2IsQ0FBQTtFQURhLENBQWY7Ozs7O0VBTUMsUUFBVyxDQUFBLENBQUE7SUFDVixJQUFDLENBQUEsS0FBRCxHQUFTLElBQUksS0FBSixDQUFVLElBQUMsQ0FBQSxDQUFDLENBQUMsYUFBYixFQUE0QixZQUE1QixFQUEwQyxJQUFDLENBQUEsT0FBM0MsRUFBb0QsQ0FBQyxDQUFELENBQUEsR0FBQTtBQUMvRCxVQUFBLENBQUEsRUFBQTtNQUFHLENBQUEsR0FBSSxJQUFDLENBQUEsQ0FBQyxDQUFDLEtBQUgsR0FBVztNQUNmLElBQUcsQ0FBQyxDQUFDLE1BQUYsSUFBYSxDQUFDLENBQUMsR0FBRixLQUFTLENBQUMsQ0FBQyxJQUFGLENBQU8sQ0FBQyxDQUFDLEdBQVQsQ0FBekI7UUFDQyxDQUFBLEdBQUksQ0FBQSxDQUFBLENBQUcsR0FBQSxDQUFJLENBQUEsY0FBSSxDQUFDLENBQUMsUUFBUyxFQUFuQixDQUFxQixDQUFDLFFBQXRCLENBQStCLENBQS9CLENBQUgsRUFBQSxDQUFBLENBQXdDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFELENBQUcsQ0FBQyxDQUFELENBQVQsQ0FBL0MsRUFBQSxFQURMO09BQUEsTUFFSyxJQUFHLENBQUksQ0FBQyxDQUFDLE1BQVQ7UUFDSixDQUFBLEdBQUksU0FEQTtPQUFBLE1BQUE7UUFHSixDQUFBLEdBQUksU0FIQTs7YUFJTCxDQUFBLEdBQUksQ0FBQyxDQUFDLElBQUYsQ0FBTyxDQUFDLENBQUMsSUFBVCxFQUFlLEVBQWYsRUFBb0IsSUFBcEI7SUFSd0QsQ0FBcEQ7V0FTVCxNQUFBLENBQU8sSUFBQyxDQUFBLE9BQVIsRUFBaUIsRUFBakIsRUFBcUIsSUFBQyxDQUFBLENBQXRCLEVBQXlCLElBQUMsQ0FBQSxDQUExQjtFQVZVOztFQVlYLFVBQWUsQ0FBQyxLQUFELENBQUE7V0FBVyxJQUFDLENBQUEsS0FBSyxDQUFDLFVBQVAsQ0FBa0IsS0FBbEI7RUFBWDs7RUFDZixZQUFlLENBQUMsS0FBRCxDQUFBO1dBQVcsSUFBQyxDQUFBLEtBQUssQ0FBQyxZQUFQLENBQW9CLEtBQXBCO0VBQVg7O0VBQ2YsVUFBZSxDQUFDLEtBQUQsQ0FBQTtXQUFXLElBQUMsQ0FBQSxPQUFPLENBQUMsR0FBRCxDQUFLLENBQUMsS0FBZCxDQUFBO0VBQVg7O0VBRWYsSUFBTyxDQUFDLEdBQUQsRUFBSyxNQUFMLEVBQVksYUFBWixDQUFBO0FBQ1IsUUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUE7SUFBRSxHQUFHLENBQUMsSUFBSixDQUFTLE9BQUEsR0FBVSxNQUFuQjtJQUNBLEdBQUcsQ0FBQyxJQUFKLENBQVMsRUFBVDtJQUNBLENBQUEsR0FBSSxJQUFDLENBQUEsQ0FBQyxDQUFDO0lBQ1AsS0FBQSx1REFBQTs7TUFDQyxJQUFHLENBQUEsR0FBSSxJQUFDLENBQUEsQ0FBQyxDQUFDLEdBQVAsS0FBYyxDQUFqQjtRQUF3QixHQUFHLENBQUMsSUFBSixDQUFTLFlBQVQsRUFBeEI7O01BQ0EsSUFBRyxNQUFNLENBQUMsTUFBUCxJQUFrQixDQUFDLENBQUMsR0FBRixLQUFTLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBRCxDQUF4QztRQUNDLEdBQUcsQ0FBQyxJQUFKLENBQVMsQ0FBQSxDQUFBLENBQUcsR0FBQSxDQUFJLENBQUEsY0FBSSxNQUFNLENBQUMsUUFBUyxFQUF4QixDQUEwQixDQUFDLFFBQTNCLENBQW9DLENBQXBDLENBQUgsRUFBQSxDQUFBLENBQTZDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFELENBQUcsQ0FBQyxDQUFELENBQWQsQ0FBcEQsRUFBQSxDQUFBLENBQTBFLE1BQU0sQ0FBQyxJQUFqRixDQUFBLENBQVQsRUFERDtPQUFBLE1BRUssSUFBRyxDQUFJLE1BQU0sQ0FBQyxNQUFkO1FBQ0osR0FBRyxDQUFDLElBQUosQ0FBUyxDQUFBLE1BQUEsQ0FBQSxDQUFTLE1BQU0sQ0FBQyxJQUFoQixDQUFBLENBQVQsRUFESTtPQUFBLE1BQUE7UUFHSixHQUFHLENBQUMsSUFBSixDQUFTLENBQUEsTUFBQSxDQUFBLENBQVMsTUFBTSxDQUFDLElBQWhCLENBQUEsQ0FBVCxFQUhJOztNQUlMLElBQUcsQ0FBQSxHQUFJLElBQUMsQ0FBQSxDQUFDLENBQUMsR0FBUCxLQUFjLElBQUMsQ0FBQSxDQUFDLENBQUMsR0FBSCxHQUFPLENBQXhCO1FBQStCLEdBQUcsQ0FBQyxJQUFKLENBQVMsSUFBVCxFQUEvQjs7SUFSRDtXQVNBLEdBQUcsQ0FBQyxJQUFKLENBQVMsSUFBVDtFQWJNOztFQWVQLElBQU8sQ0FBQSxDQUFBO0FBQ1IsUUFBQSxNQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQTtJQUFFLElBQUEsQ0FBSyxPQUFMO0lBQ0EsSUFBQyxDQUFBLFVBQUQsQ0FBWSxJQUFDLENBQUEsQ0FBQyxDQUFDLEtBQWY7SUFDQSxJQUFDLENBQUEsS0FBSyxDQUFDLElBQVAsQ0FBQTtBQUNBO0FBQUE7SUFBQSxLQUFBLFVBQUE7O21CQUNDLE1BQU0sQ0FBQyxJQUFQLENBQUE7SUFERCxDQUFBOztFQUpNOztBQXZDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGcscHJpbnQscmFuZ2Usc2NhbGV4LHNjYWxleSB9IGZyb20gJy4vZ2xvYmFscy5qcycgXHJcbmltcG9ydCB7IFBhZ2UgfSBmcm9tICcuL3BhZ2UuanMnIFxyXG5pbXBvcnQgeyBCdXR0b24sc3ByZWFkIH0gZnJvbSAnLi9idXR0b24uanMnIFxyXG5pbXBvcnQgeyBMaXN0YSB9IGZyb20gJy4vbGlzdGEuanMnICBcclxuXHJcbmV4cG9ydCBjbGFzcyBOYW1lcyBleHRlbmRzIFBhZ2VcclxuXHJcblx0Y29uc3RydWN0b3IgOiAtPlxyXG5cdFx0c3VwZXIoKVxyXG5cdFx0IyBAYnV0dG9ucy5uLmFjdGl2ZSA9IGZhbHNlXHJcblx0XHQjIEBidXR0b25zLkFycm93TGVmdCAgPSBuZXcgQnV0dG9uICcnLCAnJywgKCkgPT4gZy5zZXRTdGF0ZSBnLlRBQkxFU1xyXG5cdFx0IyBAYnV0dG9ucy5BcnJvd1JpZ2h0ID0gbmV3IEJ1dHRvbiAnJywgJycsICgpID0+IGcuc2V0U3RhdGUgZy5BQ1RJVkVcclxuXHJcblx0c2V0TGlzdGEgOiAtPlxyXG5cdFx0QGxpc3RhID0gbmV3IExpc3RhIEB0LnBsYXllcnNCeU5hbWUsIFwiVGFibGUgTmFtZVwiLCBAYnV0dG9ucywgKHApID0+XHJcblx0XHRcdHIgPSBAdC5yb3VuZCAtIDFcclxuXHRcdFx0aWYgcC5hY3RpdmUgYW5kIGcuQllFICE9IF8ubGFzdCBwLm9wcFxyXG5cdFx0XHRcdHMgPSBcIiN7c3RyKDEgKyBwLmNoYWlyIC8vIDIpLnBhZFN0YXJ0KDMpfSAje2cuUklOR1NbcC5jb2xbcl1bMF1dfSBcIlxyXG5cdFx0XHRlbHNlIGlmIG5vdCBwLmFjdGl2ZVxyXG5cdFx0XHRcdHMgPSBcIiAgIFAgIFwiXHJcblx0XHRcdGVsc2UgXHJcblx0XHRcdFx0cyA9IFwiICBCWUUgXCJcclxuXHRcdFx0cyArIGcudHh0VCBwLm5hbWUsIDI1LCAgTEVGVFxyXG5cdFx0c3ByZWFkIEBidXR0b25zLCAxMCwgQHksIEBoXHJcblxyXG5cdG1vdXNlV2hlZWwgICA6IChldmVudCApLT4gQGxpc3RhLm1vdXNlV2hlZWwgZXZlbnRcclxuXHRtb3VzZVByZXNzZWQgOiAoZXZlbnQpIC0+IEBsaXN0YS5tb3VzZVByZXNzZWQgZXZlbnRcclxuXHRrZXlQcmVzc2VkICAgOiAoZXZlbnQpIC0+IEBidXR0b25zW2tleV0uY2xpY2soKVxyXG5cclxuXHRtYWtlIDogKHJlcyxoZWFkZXIscGxheWVyc0J5TmFtZSkgLT5cclxuXHRcdHJlcy5wdXNoIFwiTkFNRVNcIiArIGhlYWRlclxyXG5cdFx0cmVzLnB1c2ggXCJcIlxyXG5cdFx0ciA9IEB0LnJvdW5kXHJcblx0XHRmb3IgcGxheWVyLGkgaW4gcGxheWVyc0J5TmFtZVxyXG5cdFx0XHRpZiBpICUgQHQucHBwID09IDAgdGhlbiByZXMucHVzaCBcIlRhYmxlIE5hbWVcIlxyXG5cdFx0XHRpZiBwbGF5ZXIuYWN0aXZlIGFuZCBnLkJZRSAhPSBwbGF5ZXIub3BwW3JdXHJcblx0XHRcdFx0cmVzLnB1c2ggXCIje3N0cigxICsgcGxheWVyLmNoYWlyIC8vIDIpLnBhZFN0YXJ0KDMpfSAje2cuUklOR1NbcGxheWVyLmNvbFtyXVswXV19ICN7cGxheWVyLm5hbWV9XCJcclxuXHRcdFx0ZWxzZSBpZiBub3QgcGxheWVyLmFjdGl2ZVxyXG5cdFx0XHRcdHJlcy5wdXNoIFwiICAgUCAgI3twbGF5ZXIubmFtZX1cIlxyXG5cdFx0XHRlbHNlIFxyXG5cdFx0XHRcdHJlcy5wdXNoIFwiICBCWUUgI3twbGF5ZXIubmFtZX1cIlxyXG5cdFx0XHRpZiBpICUgQHQucHBwID09IEB0LnBwcC0xIHRoZW4gcmVzLnB1c2ggXCJcXGZcIlxyXG5cdFx0cmVzLnB1c2ggXCJcXGZcIlxyXG5cclxuXHRkcmF3IDogLT5cclxuXHRcdGZpbGwgJ3doaXRlJ1xyXG5cdFx0QHNob3dIZWFkZXIgQHQucm91bmRcclxuXHRcdEBsaXN0YS5kcmF3KClcclxuXHRcdGZvciBrZXksYnV0dG9uIG9mIEBidXR0b25zXHJcblx0XHRcdGJ1dHRvbi5kcmF3KCkiXX0=
//# sourceURL=c:\github\FairPair2\coffee\page_names.coffee